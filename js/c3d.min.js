!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.c3d=i():t.c3d=i()}(this,function(){return function(t){function i(a){if(s[a])return s[a].exports;var h=s[a]={i:a,l:!1,exports:{}};return t[a].call(h.exports,h,h.exports,i),h.l=!0,h.exports}var s={};return i.m=t,i.c=s,i.d=function(t,s,a){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,s){"use strict";var a=s(1),h=s(2),n=function(t){this.ctx=t,this.canvas=this.ctx.canvas,this.width=this.canvas.width,this.height=this.canvas.height,this.rotateX=0,this.rotateY=0;var i=[this.width/2,this.height/2];this.axis(i);var s=[0,1e3,0];this.camera(s),this.pi=Math.PI,this.played=!0};n.prototype={data:function(t){var i;this.datas=[],this._data=[];for(var s in t)this._data.push(new a(t[s][0][0],t[s][0][1],t[s][0][2],this.center.y));for(var h in t){var n=[];for(var r in t[h])for(var e in t)t[h][r]==t[e][0]&&n.push(this._data[e]);this.datas.push(n)}return i=this.dereplication(this.datas),this.datas=this.arrClean(i),this.datas},dereplication:function(t){var i=t,s=this.arrApart(i);for(var a in s)for(var h=void 0,n=void 0,r=0;r<a;r++)if(s[r]&&(h=s[r].indexOf(s[a][0]),n=s[r].indexOf(s[a][1]),h>=0&&n>=0)){delete s[a];break}return s},arrApart:function(t){var i=new Array;for(var s in t)for(var a=1;a<t[s].length;a++)i.push([t[s][0],t[s][a]]);return i},arrClean:function(t){for(var i=0;i<t.length;i++)t[i]||(t.splice(i,1),i--);return t},draw:function(t){var i=this.datas;this.ctx.strokeStyle="hsla(0,0%,0%,1)";for(var s in i)for(var a=1;a<i[s].length;a++)"function"==typeof t?t(i[s][a].canvasX,i[s][a].canvasY,this.ctx):(t=void 0,this.ctx.beginPath(),this.ctx.moveTo(i[s][0].canvasX,i[s][0].canvasY),this.ctx.lineTo(i[s][a].canvasX,i[s][a].canvasY),this.ctx.stroke());this.info=h.runInfo("draw",t)},_draw:function(t){t(this.datas,this.ctx),this.info=h.runInfo("_draw",t)},axis:function(t){this._axis=t,this.ax=this._axis[0],this.ay=this._axis[1],this.ctx.translate(this._axis[0],this._axis[1])},camera:function(t){this.center=new Object,this.center.x=t[0],this.center.y=t[1],this.center.z=t[2]},clearCanvas:function(){this.ctx.clearRect(-this._axis[0],-this._axis[1],this.width,this.height)},run:function(){this.played&&(this.clearCanvas(),this.draw(this.datas),requestAnimationFrame(this.run.bind(this)))},mousedown:function(t){this.ax=t.clientX,this.ay=t.clientY},cameraRotate:function(t,i,s){var a,h=new Object;s?(h.x=0,h.y=0,h.z=0,a=1):(h.x=this.center.x,h.y=this.center.y,h.z=this.center.z,a=30);var n=(e.clientX,e.clientY,t-this.ax),r=i-this.ay;this.rotateX=n/a,this.rotateY=r/a;var o=Math.sin(this.rotateX*this.pi/180),c=Math.cos(this.rotateX*this.pi/180),f=Math.sin(this.rotateY*this.pi/180),u=Math.cos(this.rotateY*this.pi/180);for(var d in this._data){var x=this._data[d].x-h.x,v=this._data[d].y-h.y,y=this._data[d].z-h.z;this._data[d]._x=x*c+v*o+h.x,this._data[d]._y=x*o-v*c+h.y,v=this._data[d]._y-h.y,this._data[d]._z=y*u+v*f+h.z,this._data[d]._y=y*f-v*u+h.y,this._data[d].canvas()}this.clearCanvas(),this[this.info.fn](this.info.callback)}},t.exports=n},function(t,i,s){"use strict";function a(t,i,s,a){this.x=t,this.y=i,this.z=s,this.far=a,this.w=Math.sqrt(t*t+i*i+s*s),this.pi=Math.PI,this.angle(),this.sinX||this.cosX?this.sinY||this.cosY||(this.sinY=1,this.cosY=0):(this.sinX=1,this.cosX=0),this.axis(),this.canvas()}a.prototype={angle:function(){this.sinX=this.x/Math.sqrt(this.x*this.x+this.y*this.y),this.cosX=this.y/Math.sqrt(this.x*this.x+this.y*this.y),this.sinY=this.y/Math.sqrt(this.z*this.z+this.y*this.y),this.cosY=this.z/Math.sqrt(this.z*this.z+this.y*this.y)},_angle:function(){this._sinX=this.sinX,this._cosX=this.cosX,this._sinY=this.sinY,this._cosY=this.cosY},axis:function(){this._x=this.x,this._y=this.y,this._z=this.z},canvas:function(){this.canvasX=this._x*(this.far+this._y)/this.far,this.canvasY=-this._z*(this.far+this._y)/this.far}},t.exports=a},function(t,i,s){"use strict";function a(t,i){return{fn:t,callback:i||void 0}}t.exports={runInfo:a}}])});